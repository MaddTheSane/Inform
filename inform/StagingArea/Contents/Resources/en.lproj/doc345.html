<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <link href="indoc_WI.css" rel="stylesheet" type="text/css">
    <!--Generated by indoc-->
    <title>20.5. Matching and exactly matching</title>
    <script type="text/javascript">
            function showExtra(id, imid) {
                if (document.getElementById(id).style.display == 'block') {
                    document.getElementById(id).style.display = 'none';
                    document.getElementById(imid).src = 'inform:/doc_images/extra.png';
                } else {
                    document.getElementById(id).style.display = 'block';
                    document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
                }
            }
            function onLoaded() {
                if (window.location.hash) {
                    var hash = window.location.hash.substring(2);
                    if (hash.search("_") >= 0) {
                        var res = hash.split("_");
                        showExample("example"+res[1]);
                    } else {
                        showExample("example"+hash);
                    }
                }
            }
            window.onload=onLoaded;
            function showExample(id) {
                if (document.getElementById(id).style.display == 'block') {
                    document.getElementById(id).style.display = 'none';
                } else {
                    document.getElementById(id).style.display = 'block';
                }
            }
            function openExtra(id, imid) {
                document.getElementById(id).style.display = 'block';
                document.getElementById(imid).src = 'inform:/doc_images/extraclose.png';
            }
            function closeExtra(id, imid) {
                document.getElementById(id).style.display = 'none';
                document.getElementById(imid).src = 'inform:/doc_images/extra.png';
            }
    </script>
</head>
<body class="paper papertint">
    <script type="text/javascript">
        function pasteCode(code) {
            var myProject = window.Project;

            myProject.selectView('source');
            myProject.pasteCode(code);
        }
    </script>
    <script type="text/javascript">
        function createNewProject(code, title) {
            var myProject = window.Project;

            myProject.createNewProject(title, code);
        }
    </script>

    <!--SEARCH TITLE "Matching and exactly matching"-->
    <!--SEARCH SECTION "20.5"-->
    <!--SEARCH SORT "000-020-005-000"-->
    <!--START IGNORE 344-->
    <div class="bookheader">
        <table class="fullwidth midnightblack">
            <tr>
                <td class="midnightbannerleftcell">
                    <a href="doc344.html" class="standardlink"><img alt="Hookleft.png" src="inform:/doc_images/Hookleft.png" id="hookleft"></a>
                </td>
                <td class="midnightbannercentrecell">
                    <a href="index.html" class="standardlink"><span class="midnightbannertext">Chapter 20: Advanced Text</span></a>
                </td>
                <td class="midnightbannerrightcell">
                    <a href="index.html" class="standardlink"><img alt="Hookup.png" src="inform:/doc_images/Hookup.png" id="hookup"></a><a href="doc346.html" class="standardlink"><img alt="Hookright.png" src="inform:/doc_images/Hookright.png" id="hookright"></a>
                </td>
            </tr>
        </table>
    </div>
    <!--END IGNORE-->
    <p class="sectionheading">ยง20.5. Matching and exactly matching</p>
    <p>Up to now, we have only been able to judge two texts by seeing if they are equal, but we can now ask more subtle questions.</p>
        <!--START PHRASE "defn305"-->
        <div class="definition">
            <a id="defn305"></a><p class='defnprototype'><b>if </b>(text)<b> matches the text </b>(text)<b>:</b></p>

            <!--END PHRASE-->
            <!--definition of ph_matches-->

    <p>    This condition is true if the second text occurs anywhere inside the first. Examples:</p>
    <!--START CODE "c8111"-->
    <blockquote class="code"><p class="quoted"><a id="c8111"></a>if &quot;[score]&quot; matches the text &quot;3&quot;, ...
    </p>
    </blockquote>
    <!--END CODE-->
    <p>tests whether the digit 3 occurs anywhere in the score, as printed out; and</p>
    <!--START CODE "c8112"-->
    <blockquote class="code"><p class="quoted"><a id="c8112"></a>if the printed name of the location matches the text &quot;the&quot;, ...
    </p>
    </blockquote>
    <!--END CODE-->
    <p>tests to see whether &quot;the&quot; can be found anywhere in the current room's name. Note that the location &quot;Smotheringly Hot Jungle&quot; would pass this test - it's there if you look. On the other hand, &quot;The Orangery&quot; would not, because &quot;The&quot; does not match against &quot;the&quot;. We can get around this in a variety of ways, one of which is to tell Inform to be insensitive to the case (upper or lower) of letters:</p>
    <!--START CODE "c8113"-->
    <blockquote class="code"><p class="quoted"><a id="c8113"></a>if the printed name of the location matches the text &quot;the&quot;, case insensitively: ...
    </p>
    </blockquote>
    <!--END CODE-->
    <p>Every text matches the empty text, thus</p>
    <!--START CODE "c8114"-->
    <blockquote class="code"><p class="quoted"><a id="c8114"></a>if t matches the text &quot;&quot;, ...
    </p>
    </blockquote>
    <!--END CODE-->
    <p>is always true.</p>

        <!--end definition-->
    </div>

        <!--START PHRASE "defn306"-->
        <div class="definition">
            <a id="defn306"></a><p class='defnprototype'><b>if </b>(text)<b> exactly matches the text </b>(text)<b>:</b></p>

            <!--END PHRASE-->
            <!--definition of ph_exactlymatches-->

    <p>    This condition is true if the second text matches the first, starting at the beginning and finishing at the end. This appears to be the same as testing if one is equal to the other, but that's not quite true: for example,</p>
    <!--START CODE "c8115"-->
    <blockquote class="code"><p class="quoted"><a id="c8115"></a>if &quot;[score]&quot; exactly matches the text &quot;[best score]&quot;, ...
    </p>
    </blockquote>
    <!--END CODE-->
    <p>is true if the score and best score currently print out as the same text, which will be true if they are currently equal as numbers; but</p>
    <!--START CODE "c8116"-->
    <blockquote class="code"><p class="quoted"><a id="c8116"></a>if &quot;[score]&quot; is &quot;[best score]&quot;, ...
    </p>
    </blockquote>
    <!--END CODE-->
    <p>is never true - these are different texts, even if they sometimes look the same.</p>

        <!--end definition-->
    </div>

    <p>We can also find exactly <span class="italic">where</span> in the text the match occurred.</p>
        <!--START PHRASE "defn307"-->
        <div class="definition">
            <a id="defn307"></a><p class='defnprototype'><b>first index of the</b>/--<b> text match ... number</b></p>

            <!--END PHRASE-->
            <!--definition of ph_textfirstindex-->

    <p>    Following a successful text match, this produces the character number of where the match began.</p>
    <!--START CODE "c8117"-->
    <blockquote class="code"><p class="quoted"><a id="c8117"></a>if &quot;vacation&quot; matches the text &quot;cat&quot;:
    <br>
            let x be the first index of the text match;
    </p>
    </blockquote>
    <!--END CODE-->
    <p>assigns 3 to x.</p>
    <p>If you're interested in these results, get and store them immediately after the match: the values will</p>
    <p>be overwritten when the next match operation happens.</p>
    <p>Always test for success before using this phrase: the result is undefined if the match failed.</p>

        <!--end definition-->
    </div>

        <!--START PHRASE "defn308"-->
        <div class="definition">
            <a id="defn308"></a><p class='defnprototype'><b>last index of the</b>/--<b> text match ... number</b></p>

            <!--END PHRASE-->
            <!--definition of ph_textlastindex-->

    <p>    Similarly, we can find the character number of the <span class="italic">last</span> character in the match.</p>
    <!--START CODE "c8118"-->
    <blockquote class="code"><p class="quoted"><a id="c8118"></a>last index of &quot;cat&quot; in &quot;vacation&quot;
    </p>
    </blockquote>
    <!--END CODE-->
    <p>produces 5.</p>
    <p>As noted above, always test for success before using this phrase, and store or act on the</p>
    <p>result immediately before another match overwrites it.</p>

        <!--end definition-->
    </div>

        <!--START PHRASE "defn309"-->
        <div class="definition">
            <a id="defn309"></a><p class='defnprototype'><b>length of the</b>/--<b> text match ... number</b></p>

            <!--END PHRASE-->
            <!--definition of ph_textlength-->

    <p>    Finally, we can get the length of the match, i.e., 3 for the &quot;cat&quot; example, again with</p>
    <p>the caveats above regarding testing for a successful match and using or storing the result</p>
    <p>promptly.</p>

        <!--end definition-->
    </div>

    <p>Every text (including &quot;&quot;) matches the text &quot;&quot;. In this case, the first index, last index, and</p>
    <p>length are all 0. Matching against &quot;&quot; is the <span class="italic">only</span> time any of these values will be 0 after</p>
    <p>a successful text match.</p>
    <p>We can also see how many times something matches:</p>
        <!--START PHRASE "defn310"-->
        <div class="definition">
            <a id="defn310"></a><p class='defnprototype'><b>number of times </b>(text)<b> matches the text </b>(text)<b> ... number</b></p>

            <!--END PHRASE-->
            <!--definition of ph_nummatches-->

    <p>    This produces the number of times the second text occurs within the first. The matches are not allowed to overlap. Example:</p>
    <!--START CODE "c8119"-->
    <blockquote class="code"><p class="quoted"><a id="c8119"></a>number of times &quot;pell-mell sally&quot; matches the text &quot;ll&quot; = 3
    <br>
    number of times &quot;xyzzy&quot; matches the text &quot;Z&quot; = 0
    <br>
    number of times &quot;xyzzy&quot; matches the text &quot;Z&quot;, case insensitively = 2
    <br>
    number of times &quot;aaaaaaaa&quot; matches the text &quot;aaaa&quot; = 2
    </p>
    </blockquote>
    <!--END CODE-->

        <!--end definition-->
    </div>

    <p>In the next section we shall see that &quot;matches&quot; and &quot;exactly matches&quot; can do much more than the simple text matching demonstrated above.</p>
    <p>There's no &quot;number of times WHATEVER exactly matches the text FIND&quot; phrase since this is by definition going to have to be 0 or 1.</p>
    <hr>
    <!--START IGNORE-->
    <div class="bookfooter">
        <table class="fullwidth">
            <tr>
                <td class="footerprevious">
                    <a href="doc344.html" class="footerlink">Previous</a>
                </td>
                <td class="footercontents">
                    <a href="index.html" class="footerlink">Contents</a>
                </td>
                <td class="footernext">
                    <a href="doc346.html" class="footerlink">Next</a>
                </td>
            </tr>
        </table>
    </div>
    <!--END IGNORE-->
</body>
</html>
